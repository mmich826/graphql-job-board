(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,a){e.exports=a(37)},37:function(e,t,a){"use strict";a.r(t);a(27);var n=a(0),r=a.n(n),c=a(23),s=a.n(c),o=a(2),i=a(3),l=a(5),m=a(4),u=a(6),d=a(9),p=a(12),b=a(11),h=a.n(b),v=a(13),f="accessToken";function E(){return(E=Object(v.a)(h.a.mark(function e(t,a){var n,r,c;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:9000/login",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:t,password:a})});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:r=e.sent,c=r.token,localStorage.setItem(f,c);case 9:return e.abrupt("return",n.ok);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}var j=[{id:"company1",name:"Company AFD1",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."},{id:"company2",name:"Company BFD1",description:"Lorem ipsum asdfasdfasdfasdfasdfasdf asdf asd f asdf asd fasdfasdfasdfasdf dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}],g=[{id:"job1",title:"Job 1",company:j[0],description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."},{id:"job2",title:"Job 2",company:j[1],description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}],y=function(e){function t(e){var a;Object(o.a)(this,t);var n=(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).props.match.params.companyId;return a.state={company:j.find(function(e){return e.id===n})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.company;return r.a.createElement("div",null,r.a.createElement("h1",{className:"title"},e.name),r.a.createElement("div",{className:"box"},e.description))}}]),t}(n.Component),O=a(16),N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={email:"",password:"",error:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(O.a)({},a,n))}},{key:"handleClick",value:function(e){var t=this;e.preventDefault();var a=this.state;(function(e,t){return E.apply(this,arguments)})(a.email,a.password).then(function(e){e?t.props.onLogin():t.setState({error:!0})})}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error;return r.a.createElement("form",null,r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Email"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",name:"email",value:t,onChange:this.handleChange.bind(this)}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Password"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"password",name:"password",value:a,onChange:this.handleChange.bind(this)}))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"help is-danger"},n&&"Invalid credentials"),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-link",onClick:this.handleClick.bind(this)},"Login"))))}}]),t}(n.Component),k=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.jobs;return r.a.createElement("ul",{className:"box"},e.map(this.renderJob.bind(this)))}},{key:"renderJob",value:function(e){var t=e.company?"".concat(e.title," at ").concat(e.company.name):e.title;return r.a.createElement("li",{className:"media",key:e.id},r.a.createElement("div",{className:"media-content"},r.a.createElement(d.b,{to:"/jobs/".concat(e.id)},t)))}}]),t}(n.Component);function C(){return x.apply(this,arguments)}function x(){return(x=Object(v.a)(h.a.mark(function e(){var t,a;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"{\n              jobs {\n                id\n                title\n                company {\n                  id\n                  name\n                }\n              }\n            }"})});case 2:return t=e.sent,console.log("-----------\x3e resp=",t),e.next=6,t.json();case 6:return a=e.sent,console.log("-----------\x3e resp body=",a),e.abrupt("return",a.data.jobs);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}var w=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={jobs:[]},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(v.a)(h.a.mark(function e(){var t;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("-------------\x3e PRE"),e.next=3,C();case 3:t=e.sent,console.log("-------------\x3e",t),this.setState({jobs:t});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.jobs;return r.a.createElement("div",null,r.a.createElement("h1",{className:"title"},"Job Board"),r.a.createElement(k,{jobs:e}))}}]),t}(n.Component),I=function(e){function t(e){var a;Object(o.a)(this,t);var n=(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).props.match.params.jobId;return a.state={job:g.find(function(e){return e.id===n})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.job;return r.a.createElement("div",null,r.a.createElement("h1",{className:"title"},e.title),r.a.createElement("h2",{className:"subtitle"},r.a.createElement(d.b,{to:"/companies/".concat(e.company.id)},e.company.name)),r.a.createElement("div",{className:"box"},e.description))}}]),t}(n.Component),L=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={title:"",description:""},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(O.a)({},a,n))}},{key:"handleClick",value:function(e){e.preventDefault(),console.log("should post a new job:",this.state)}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.description;return r.a.createElement("div",null,r.a.createElement("h1",{className:"title"},"New Job"),r.a.createElement("div",{className:"box"},r.a.createElement("form",null,r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Title"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",name:"title",value:t,onChange:this.handleChange.bind(this)}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Description"),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"input",style:{height:"10em"},name:"description",value:a,onChange:this.handleChange.bind(this)}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-link",onClick:this.handleClick.bind(this)},"Submit"))))))}}]),t}(n.Component),S=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.loggedIn,a=e.onLogout;return t?r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"navbar-start"},r.a.createElement(d.b,{className:"navbar-item",to:"/"},"Home"),r.a.createElement(d.b,{className:"navbar-item",to:"/jobs/new"},"Post Job"),r.a.createElement("a",{className:"navbar-item",onClick:a},"Logout"))):r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"navbar-start"},r.a.createElement(d.b,{className:"navbar-item",to:"/"},"Home"),r.a.createElement(d.b,{className:"navbar-item",to:"/login"},"Login")))}}]),t}(n.Component),J=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={loggedIn:!!localStorage.getItem(f)},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleLogin",value:function(){this.setState({loggedIn:!0}),this.router.history.push("/")}},{key:"handleLogout",value:function(){localStorage.removeItem(f),this.setState({loggedIn:!1}),this.router.history.push("/")}},{key:"render",value:function(){var e=this,t=this.state.loggedIn;return r.a.createElement(d.a,{ref:function(t){return e.router=t}},r.a.createElement("div",null,r.a.createElement(S,{loggedIn:t,onLogout:this.handleLogout.bind(this)}),r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:w}),r.a.createElement(p.a,{path:"/companies/:companyId",component:y}),r.a.createElement(p.a,{exact:!0,path:"/jobs/new",component:L}),r.a.createElement(p.a,{path:"/jobs/:jobId",component:I}),r.a.createElement(p.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(N,{onLogin:e.handleLogin.bind(e)})}}))))))}}]),t}(n.Component);s.a.render(r.a.createElement(J,null),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.12f61f16.chunk.js.map